 <!-- Headings -->

# Marketplace Research Document -  LooksRare 

<br>

## **Team** :

<br>

| _Name :_                |        _Email :_         |    _Role :_  |
| :---------------------- | :----------------------: |    -------:  |
| _Ali Wisam_             |     *aliwisaam73@gmail.com*   | Team Leader   |
| _Muhammad Aquib_        |     *aquib20034@gmail.com*    |  Researcher   |
| _Burhan Saleemi_        | *burhansaleemi@tutanota.com*  |  Researcher   |
| _Ruwaifa Tahir_         | *ruwaifatahir@gmail.com*      |  Repository   |
---

<br>

## _Introduction_ :


LooksRare is a decentralized, community-first NFT marketplace that actively rewards traders, token stakers, creators and collectors for participating on the platform. [[Link]](https://docs.looksrare.org/about/welcome-to-looksrare)

Part of being community-first means that LooksRare rewards, empowers, and gives back to the platform's users and creators. The reward token has value in market.

  - Get rewarded - Users that buy or sell any NFTs on LooksRare earn LOOKS tokens.
  - Share the platform fees - 100% of trading fees are earned by LOOKS stakers.
  - Creators get paid instantly - Creators get royalty payments at the moment of sale.
  - Whenever you trade NFTs on LooksRare, user earns LOOKS tokens as trading rewards.
  - Private sales are not eligible for trading rewards.


Two unidentified founders going by the pseudonyms “Zodd” and “Guts” launched the platform in January 2022, with a team of 11 members tending to the project’s development. 

The aim of LooksRare was to dethrone OpenSea from its number one spot in the NFT market. The site had planned to add new features to lure NFT enthusiasts. Almost all of those initiatives have focused on the incentive program built around the Looks token awarded to active users of the platform. [[Link]](https://learn.bybit.com/nft/what-is-looksrare-looks/)


About $18 billion of the trading volume on the platform, or about 95% of the total activity, can be attributed to what’s often referred to as wash sales, according to data compiled by NFT tracker CryptoSlam. The transactions are seen as one of the many gray areas in crypto when it comes to regulation. In this case, the sales are done to win new tokens rather than to pump up nonfungible token prices to lure unsuspecting buyers. The marketplace benefits from the fees generated by each transaction. [[Link]](https://fortune.com/2022/04/05/looksrare-nft-marketplace-challenging-opensea-wash-trades-win-rewards-coins/)

---
<br>


## **Dependencies** :

| Parameters :                        | Details :                        |
| ----------------------------------- | -------------------------------- |
| **Hosting**                         | _[Cloudflare](https://www.cloudflare.com/?utm_source=Get-More-Visits&utm_medium=Add-All-Your-Plans-To-HostAdvice&utm_term=ItsFree&utm_campaign=HostAdvice)_ |
| **Node.js**                         | _[nodejs](https://nodejs.org/en/)_ |
| **React**                           | _[reactjs](https://reactjs.org)_ |
| **Royalty Registry**                | _[Royalty Registry](https://royaltyregistry.xyz/)_ |
| **OpenZeppelin**                    | _[OpenZeppelin](https://openzeppelin.com/contracts/)_ |


<br>



<br>

## _Research Parameters_:

<br>

| Parameters :                        | Details :                        |
| ----------------------------------- | -------------------------------- |
| **Supported Blockchains :**         | Ethereum                         |
| **Payment Methods :**               | ETH/WETH, Look                         |
| **Buyer Fee :**                     | 0%                               |
| **Seller Fee :**                    | 2% excluding private sales.  [[Link]](https://docs.looksrare.org/about/rewards/platform-fee) | 
| **Royalties :**                     | true [[Link]](https://www.business2community.com/nft/best-marketplaces/looksrare-review) |
| **Listing Type/ Selling Methods :** | like opensea      |
| **Sale Type:**                      |  Fixed, Auction  |
| **Categories :**                    | generative art projects like Bored Ape Yacht Club [[Link]](https://nftdroops.com/marketplaces/looksrare/) |
| **Recommended Wallets :**           | Metamask,WalletConnect,Coinbase [[Link]](https://looksrare.org/)|
| **File Format :**                   | .png, .jpeg, .jpg, .gif, .tif, .tiff, .raw, .svg, .glb        |
| **Max File Size :**                 | 200MB      |
| **Media Storage :**                 | True      |
| **Decentralization :**              | Yes       |
| **Ownership :**                     | 0xbfb6669ef4c4c71ae6e722526b1b8d7d9ff9a019[[Link]](https://etherscan.io/address/0x59728544b08ab483533076417fbbb2fd0b17ce3a#readContract)       |
| **Licensing :**                     | _MIT[[Link]](https://etherscan.io/address/0x59728544b08ab483533076417fbbb2fd0b17ce3a#code)_       |
| **Governance :**                    | No       |
| **Staking :**                       | _true_       |
| **KYC :**                           | _Twitter,Instagram, Discord_       |
| **Company Registration :**          | No    |
| **Community Engagement :**          | Good    |

---

<br>

## _Marketplace Contracts_ :

<br>

| Contracts :             |         Details :          |
| ----------------------    | ------------------------ |
| **FETH**                  | _[ERC-20 token](https://eips.ethereum.org/EIPS/eip-20) modeled after [WETH9](https://etherscan.io/address/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code) |
| **Market**                | _[Contract](/docs/FNDNFTMarket.md) which allows traders to buy and sell NFTs_ |
| **OpenZeppelin Contracts**| _Dependencie [OpenZeppelin Contracts](https://openzeppelin.com/contracts/)_ |
| **Royalty Registry**      | _Dependencie [Royalty Registry](https://royaltyregistry.xyz/)_ |


---

<br>

## _Contracts Description_ :

<br>

- **_Minting of Looks ERC20 - Token  :_**  [[Link]](https://github.com/LooksRare/contracts-token-staking/blob/master/contracts/LooksRareToken.sol)

  - @notice Mint LOOKS tokens
  - @param account address to receive tokens
  - @param amount amount to mint
  - @return status true if mint is successful, false if not

<br>

```javascript
function mint(address account, uint256 amount) external override onlyOwner returns (bool status) {
      if (totalSupply() + amount <= _SUPPLY_CAP) {
          _mint(account, amount);
          return true;
      }
      return false;
  }
```
<br>

- **_Buying Process 1:_**  [[Link]](https://github.com/LooksRare/contracts-exchange-v1/blob/master/contracts/LooksRareExchange.sol)

  - @notice Match ask with a taker bid order using ETH
  - @param takerBid taker bid order
  - @param makerAsk maker ask order

<br>

```javascript
function matchAskWithTakerBidUsingETHAndWETH(
        OrderTypes.TakerOrder calldata takerBid,
        OrderTypes.MakerOrder calldata makerAsk
    ) external payable override nonReentrant {
        require((makerAsk.isOrderAsk) && (!takerBid.isOrderAsk), "Order: Wrong sides");
        require(makerAsk.currency == WETH, "Order: Currency must be WETH");
        require(msg.sender == takerBid.taker, "Order: Taker must be the sender");

        // If not enough ETH to cover the price, use WETH
        if (takerBid.price > msg.value) {
            IERC20(WETH).safeTransferFrom(msg.sender, address(this), (takerBid.price - msg.value));
        } else {
            require(takerBid.price == msg.value, "Order: Msg.value too high");
        }

        // Wrap ETH sent to this contract
        IWETH(WETH).deposit{value: msg.value}();

        // Check the maker ask order
        bytes32 askHash = makerAsk.hash();
        _validateOrder(makerAsk, askHash);

        // Retrieve execution parameters
        (bool isExecutionValid, uint256 tokenId, uint256 amount) = IExecutionStrategy(makerAsk.strategy)
            .canExecuteTakerBid(takerBid, makerAsk);

        require(isExecutionValid, "Strategy: Execution invalid");

        // Update maker ask order status to true (prevents replay)
        _isUserOrderNonceExecutedOrCancelled[makerAsk.signer][makerAsk.nonce] = true;

        // Execution part 1/2
        _transferFeesAndFundsWithWETH(
            makerAsk.strategy,
            makerAsk.collection,
            tokenId,
            makerAsk.signer,
            takerBid.price,
            makerAsk.minPercentageToAsk
        );

        // Execution part 2/2
        _transferNonFungibleToken(makerAsk.collection, makerAsk.signer, takerBid.taker, tokenId, amount);

        emit TakerBid(
            askHash,
            makerAsk.nonce,
            takerBid.taker,
            makerAsk.signer,
            makerAsk.strategy,
            makerAsk.currency,
            makerAsk.collection,
            tokenId,
            amount,
            takerBid.price
        );
    }
```


<br>

- **_Buying Process 2:_**  [[Link]](https://github.com/LooksRare/contracts-exchange-v1/blob/master/contracts/LooksRareExchange.sol)

  - @notice Match a takerBid with a matchAsk
  - @param takerBid taker bid order
  - @param makerAsk maker ask order

<br>

```javascript
 function matchAskWithTakerBid(OrderTypes.TakerOrder calldata takerBid, OrderTypes.MakerOrder calldata makerAsk)
        external
        override
        nonReentrant
    {
        require((makerAsk.isOrderAsk) && (!takerBid.isOrderAsk), "Order: Wrong sides");
        require(msg.sender == takerBid.taker, "Order: Taker must be the sender");

        // Check the maker ask order
        bytes32 askHash = makerAsk.hash();
        _validateOrder(makerAsk, askHash);

        (bool isExecutionValid, uint256 tokenId, uint256 amount) = IExecutionStrategy(makerAsk.strategy)
            .canExecuteTakerBid(takerBid, makerAsk);

        require(isExecutionValid, "Strategy: Execution invalid");

        // Update maker ask order status to true (prevents replay)
        _isUserOrderNonceExecutedOrCancelled[makerAsk.signer][makerAsk.nonce] = true;

        // Execution part 1/2
        _transferFeesAndFunds(
            makerAsk.strategy,
            makerAsk.collection,
            tokenId,
            makerAsk.currency,
            msg.sender,
            makerAsk.signer,
            takerBid.price,
            makerAsk.minPercentageToAsk
        );

        // Execution part 2/2
        _transferNonFungibleToken(makerAsk.collection, makerAsk.signer, takerBid.taker, tokenId, amount);

        emit TakerBid(
            askHash,
            makerAsk.nonce,
            takerBid.taker,
            makerAsk.signer,
            makerAsk.strategy,
            makerAsk.currency,
            makerAsk.collection,
            tokenId,
            amount,
            takerBid.price
        );
    }

```


- **_Buying Process 3:_**  [[Link]](https://github.com/LooksRare/contracts-exchange-v1/blob/master/contracts/LooksRareExchange.sol)

  - @notice Match a takerAsk with a makerBid
  - @param takerAsk taker ask order
  - @param makerBid maker bid order

<br>

```javascript
    function matchBidWithTakerAsk(OrderTypes.TakerOrder calldata takerAsk, OrderTypes.MakerOrder calldata makerBid)
        external
        override
        nonReentrant
    {
        require((!makerBid.isOrderAsk) && (takerAsk.isOrderAsk), "Order: Wrong sides");
        require(msg.sender == takerAsk.taker, "Order: Taker must be the sender");

        // Check the maker bid order
        bytes32 bidHash = makerBid.hash();
        _validateOrder(makerBid, bidHash);

        (bool isExecutionValid, uint256 tokenId, uint256 amount) = IExecutionStrategy(makerBid.strategy)
            .canExecuteTakerAsk(takerAsk, makerBid);

        require(isExecutionValid, "Strategy: Execution invalid");

        // Update maker bid order status to true (prevents replay)
        _isUserOrderNonceExecutedOrCancelled[makerBid.signer][makerBid.nonce] = true;

        // Execution part 1/2
        _transferNonFungibleToken(makerBid.collection, msg.sender, makerBid.signer, tokenId, amount);

        // Execution part 2/2
        _transferFeesAndFunds(
            makerBid.strategy,
            makerBid.collection,
            tokenId,
            makerBid.currency,
            makerBid.signer,
            takerAsk.taker,
            takerAsk.price,
            takerAsk.minPercentageToAsk
        );

        emit TakerAsk(
            bidHash,
            makerBid.nonce,
            takerAsk.taker,
            makerBid.signer,
            makerBid.strategy,
            makerBid.currency,
            makerBid.collection,
            tokenId,
            amount,
            takerAsk.price
        );
    }
```

<br>

- **_Cancel Orders :_**

  - @notice Cancel all pending orders for a sender
  - @param minNonce minimum user nonce

<br>

```javascript
function cancelAllOrdersForSender(uint256 minNonce) external {
      require(minNonce > userMinOrderNonce[msg.sender], "Cancel: Order nonce lower than current");
      require(minNonce < userMinOrderNonce[msg.sender] + 500000, "Cancel: Cannot cancel more orders");
      userMinOrderNonce[msg.sender] = minNonce;

      emit CancelAllOrders(msg.sender, minNonce);
  }
```


<br>


- **_Distribution of funds :_**  [[Link]](https://github.com/LooksRare/contracts-exchange-v1/blob/master/contracts/LooksRareExchange.sol)
    - @notice Transfer fees and funds to royalty recipient, protocol, and seller
    - @param strategy address of the execution strategy
    - @param collection non fungible token address for the transfer
    - @param tokenId tokenId
    - @param currency currency being used for the purchase (e.g., WETH/USDC)
    - @param from sender of the funds
    - @param to seller's recipient
    - @param amount amount being transferred (in currency)
    - @param minPercentageToAsk minimum percentage of the gross amount that goes to ask

<br>

```javascript
function _transferFeesAndFunds(
      address strategy,
      address collection,
      uint256 tokenId,
      address currency,
      address from,
      address to,
      uint256 amount,
      uint256 minPercentageToAsk
  ) internal {
      // Initialize the final amount that is transferred to seller
      uint256 finalSellerAmount = amount;

      // 1. Protocol fee
      {
          uint256 protocolFeeAmount = _calculateProtocolFee(strategy, amount);

          // Check if the protocol fee is different than 0 for this strategy
          if ((protocolFeeRecipient != address(0)) && (protocolFeeAmount != 0)) {
              IERC20(currency).safeTransferFrom(from, protocolFeeRecipient, protocolFeeAmount);
              finalSellerAmount -= protocolFeeAmount;
          }
      }

      // 2. Royalty fee
      {
          (address royaltyFeeRecipient, uint256 royaltyFeeAmount) = royaltyFeeManager
              .calculateRoyaltyFeeAndGetRecipient(collection, tokenId, amount);

          // Check if there is a royalty fee and that it is different to 0
          if ((royaltyFeeRecipient != address(0)) && (royaltyFeeAmount != 0)) {
              IERC20(currency).safeTransferFrom(from, royaltyFeeRecipient, royaltyFeeAmount);
              finalSellerAmount -= royaltyFeeAmount;

              emit RoyaltyPayment(collection, tokenId, royaltyFeeRecipient, currency, royaltyFeeAmount);
          }
      }

      require((finalSellerAmount * 10000) >= (minPercentageToAsk * amount), "Fees: Higher than expected");

      // 3. Transfer final amount (post-fees) to seller
      {
          IERC20(currency).safeTransferFrom(from, to, finalSellerAmount);
      }
  }
```


<br>


- **_Royalty Fee calculation:_** [[Link]](https://github.com/LooksRare/contracts-exchange-v1/blob/master/contracts/RoyaltyFeeManager.sol)
    - @notice Calculate royalty fee and get recipient
    - @param collection address of the NFT contract
    - @param tokenId tokenId
    - @param amount amount to transfer

<br>

```javascript
function calculateRoyaltyFeeAndGetRecipient(
        address collection,
        uint256 tokenId,
        uint256 amount
    ) external view override returns (address, uint256) {
        // 1. Check if there is a royalty info in the system
        (address receiver, uint256 royaltyAmount) = royaltyFeeRegistry.royaltyInfo(collection, amount);

        // 2. If the receiver is address(0), fee is null, check if it supports the ERC2981 interface
        if ((receiver == address(0)) || (royaltyAmount == 0)) {
            if (IERC165(collection).supportsInterface(INTERFACE_ID_ERC2981)) {
                (receiver, royaltyAmount) = IERC2981(collection).royaltyInfo(tokenId, amount);
            }
        }
        return (receiver, royaltyAmount);
    }
```

<br>

---

<br>

## _Conclusion_ :

- LooksRare NFT marketplace offers unique features that set it aside from its competition. Only time will tell if these features will prevail, but at this point, it looks like LooksRare has a bright future in the NFT space. Buying and selling NFTs on LooksRare is as easy as using OpenSea and if you like rewards for trading NFTs, LooksRare might be worth taking a look at.

---


<br>

## _Resources_:

<br>

- [NFT Recourses](https://github.com/gianni-dalerta/awesome-nft)
- [Marketplaces Sheet](https://docs.google.com/spreadsheets/d/1Q_6GnX7DhFDBD4hHKaMUkesMIO9rxJx5ewcKVv4Tjag/edit)
- [LooksRare Github Repo](https://github.com/LooksRare/contracts-exchange-v1/tree/master/contracts)

